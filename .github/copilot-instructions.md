# Copilot Instructions for Remember Pertinent Information

## Project Overview

This is a Next.js 15 web application that helps students learn course prerequisites, skills, and concepts through an interactive interface. The app allows educators to set up learning modules and helps students familiarize themselves with course materials.

## Technology Stack

### Frontend
- **Framework**: Next.js 15 (App Router) - Use App Router conventions, not Pages Router
- **React**: Version 19 - Use functional components with hooks only, no class components
- **TypeScript**: Version 5 - Always use strict mode and explicit types
- **UI Library**: Material-UI (MUI) v7 with Emotion and Tailwind CSS 4
- **Fonts**: Roboto via @fontsource

### Backend
- **Runtime**: Next.js API Routes on Node.js
- **Database**: PostgreSQL with Prisma ORM v6
- **Package Manager**: Yarn (not npm)

### Build & Dev Tools
- **Build Tool**: Next.js Turbopack - use `--turbopack` flag
- **Linter**: ESLint 9
- **Type Checker**: TypeScript with strict mode

## Project Structure

We use a **flat, root-level architecture** (no src/ folder):

```
/
├── app/                    # Next.js App Router (pages & API routes)
│   ├── layout.tsx          # Root layout with providers
│   ├── page.tsx            # Home page (/)
│   ├── globals.css         # Global styles
│   ├── admin/              # Admin routes
│   └── api/                # API route handlers
├── components/             # React UI components
├── providers/              # React Context providers (Theme, Modals)
├── utils/                  # Utility functions (Prisma client, etc.)
├── theme/                  # MUI theme configuration
├── generated/              # Auto-generated Prisma client
├── prisma/                 # Database schema & migrations
├── scripts/                # Utility scripts
└── public/                 # Static assets
```

## Path Aliases

Always use `@/` for imports instead of relative paths:

```typescript
// ✅ Good
import { Header } from '@/components/Header';
import { prisma } from '@/utils/prisma';

// ❌ Avoid
import { Header } from '../../components/Header';
```

## Coding Conventions

### TypeScript
- Use `interface` for object types, not `type` unless necessary
- Prefer `const` over `let`, never use `var`
- Use arrow functions for components
- Add explicit return types for all functions
- Enable and maintain strict TypeScript mode

### React
- Functional components only (no class components)
- Use hooks (useState, useEffect, etc.)
- Extract reusable logic into custom hooks
- Keep components small and focused
- Server Components by default - add `'use client'` only when needed for interactivity

### Naming Conventions
- **Components**: PascalCase (e.g., `UserProfile.tsx`, `SearchBar.tsx`)
- **Utilities**: camelCase (e.g., `formatDate.ts`, `prisma.ts`)
- **Constants**: UPPER_SNAKE_CASE (e.g., `MAX_ITEMS`, `API_BASE_URL`)
- **Next.js special files**: lowercase (e.g., `page.tsx`, `layout.tsx`, `route.ts`)
- **Files**: Match component name (e.g., `MyComponent.tsx` for MyComponent)

### Styling
- **Primary**: Material-UI components with MUI's `sx` prop
- **Secondary**: Tailwind CSS classes for utility styling
- **Advanced**: Emotion CSS-in-JS when needed
- Always use MUI theme values for colors, spacing, and breakpoints

## Database & Prisma

### Prisma Usage
- Import Prisma client from `@/utils/prisma` (singleton pattern)
- Always use Prisma for database queries, never raw SQL
- Use TypeScript types generated by Prisma
- Run `yarn prisma:generate` after schema changes

### Entity Types
The database has these main entity types:
- **Concepts**: Learning concepts with code, name, description
- **Skills**: Individual skills students should master
- **Courses**: RPI courses (scraped from QUACS)
- **Tracks**: Course tracks within majors
- **Departments**: Academic departments
- **Majors**: Degree programs

### Schema Pattern
All entities follow this pattern:
```typescript
{
  id: string;          // cuid primary key
  code: string;        // unique short code (e.g., "CSCI1200")
  name: string;        // display name
  description?: string; // optional description
}
```

## Development Workflow

### Available Scripts
- `yarn dev` - Start dev server with Turbopack
- `yarn build` - Build for production
- `yarn lint` - Run ESLint
- `yarn tsc:check` - Type check without emitting
- `yarn prisma:generate` - Generate Prisma client
- `yarn prisma:migrate` - Run database migrations
- `yarn prisma:seed` - Seed database with sample data

### Branch Strategy
- Create feature branches: `feature/my-feature`
- Commit messages: Present tense, descriptive ("Add feature" not "Added feature")
- Reference issues: "Fix #123: Correct search bug"

## API Routes

### RESTful Patterns
- Use Next.js App Router API routes in `app/api/`
- Place route handlers in `route.ts` files
- Support GET, POST, PUT, DELETE as needed
- Return JSON responses with appropriate status codes
- Handle errors gracefully with try-catch blocks

### Example Structure
```
app/api/
├── search/
│   └── route.ts        # GET /api/search
└── admin/
    ├── entities/
    │   └── route.ts    # GET, POST /api/admin/entities
    └── details/
        └── route.ts    # GET /api/admin/details
```

## Component Patterns

### Server Components (Default)
```typescript
// No 'use client' directive needed
export default async function Page() {
  const data = await prisma.concept.findMany();
  return <div>{data.map(...)}</div>;
}
```

### Client Components (When Needed)
```typescript
'use client';
import { useState } from 'react';

export default function Interactive() {
  const [count, setCount] = useState(0);
  return <button onClick={() => setCount(count + 1)}>{count}</button>;
}
```

## Special Files (Next.js App Router)

- `page.tsx` - Page component (required for route)
- `layout.tsx` - Shared layout wrapping pages
- `loading.tsx` - Loading UI during async operations
- `error.tsx` - Error boundary for route segment
- `not-found.tsx` - 404 page
- `route.ts` - API route handler

## Important Notes

### Do
- Use the App Router (not Pages Router)
- Follow the flat root-level structure
- Use TypeScript strict mode
- Use Prisma for all database operations
- Use Material-UI as the primary UI framework
- Use `yarn` for package management
- Add `'use client'` only when needed for client-side features
- Keep components small and focused
- Write explicit types for all functions and components

### Don't
- Don't use the Pages Router (`pages/` directory)
- Don't use `npm` (use `yarn` instead)
- Don't use class components (use functional components)
- Don't use `var` (use `const` or `let`)
- Don't use raw SQL (use Prisma)
- Don't use relative imports when `@/` alias is available
- Don't create `src/` directory (use root-level folders)

## Testing & Debugging

### Manual Testing Checklist
- Pages load without errors
- Search functionality works
- Entity modals open correctly
- Admin interface functions properly
- API endpoints return expected data
- Dark/light theme toggles correctly

### Debugging
- Server-side: Check terminal output
- Client-side: Use browser DevTools console
- Database: Use Prisma Studio (`npx prisma studio`)
- Type errors: Run `yarn tsc:check`

## Resources

For more details, refer to these documentation files:
- `ARCHITECTURE.md` - Detailed architecture and design decisions
- `ONBOARDING.md` - Developer onboarding guide with examples
- `MIGRATION_GUIDE.md` - Guide for structure changes
- `ROUTING.md` - Routing patterns and conventions
- `README.md` - Project overview and quick start

## Project-Specific Context

### Current Phase
The project is in active development with these priorities:
1. Interfacing with Course Scaffold (previous RCOS project)
2. Building course framework with user interface
3. Implementing user posts (quizzes, videos, text)
4. Syncing database with RPI course offerings
5. Gathering feedback from professors and students

### Data Sources
- Course data from QUACS (RPI course database)
- Major requirements and prerequisites
- Department and course catalog information

### Authentication (Future)
- RPI SSO integration planned
- DUO verification for login
- Separate roles for professors and students
